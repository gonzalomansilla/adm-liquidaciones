<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Liquidations Managment</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <style>
        #Empleado {
            display: none;
        }

        #Empresa {
            display: none;
        }

        #Liquidador {
            display: none;
        }
    </style>

    <script>
        $(document).ready(function () {

            let rol = localStorage.getItem("rol");
            if (rol == null || rol == "") {
                alert("Error, vuelva a ingresar a su cuenta");
                window.location = "/Login.html";
            } else {
                if (rol == "Empleado") {
                    $("#Empleado").show();
                }
                if (rol == "Empresa") {
                    $("#Empresa").show();
                }
                if (rol == "Liquidador") {
                    $("#Liquidador").show();
                }
            };

            $("#CerrarSesion").click(function () {
                localStorage.clear();
                window.location = "/Login.html";
            });

            /*
            $.ajax({
                url: "https://localhost:5001/api/Security/VerifyToken",
                method: "POST",
                crossDomain: true,
                headers: {
                    "Accept": "application/json",
                    "Authorization": token,
                },
                data: JSON.stringify(data),
                dataType: 'json',
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (typeof data !== "object") {
                        data = data.d || data;
                        data = JSON.parse(data);
                    }
                    debugger;
                    var role = data.role;
                    $("#"+role+"").navbar(role);
                },
                error: function (xhr) {
                    let response = JSON.parse(xhr.responseText);
                    switch (xhr.status) {
                        case 401:
                            alert(response.message)
                            window.location = "/Login.html";
                            break;
                        case 400:
                        case 404:
                            alert(response.message)
                            break;
                        default:
                            alert(JSON.stringify(xhr));
                    }
                }
            });
        }*/
        });
    </script>

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="./Tabla.html">Home</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto" id="Liquidador">
                <li class="nav-item" id="navbarSupportedContent">
                    <a class="nav-link" href="./StartLiquidations.html">Efectuar Liquidaciones</a>
                </li>
                 <li class="nav-item" id="navbarSupportedContent">
                    <a class="nav-link" href="./VerEmpresas.html">Menu de gestion de empresas</a>
                </li>
            </ul>
            <ul class="navbar-nav mr-auto" id="Empresa" style="display:contents">
                <li class="nav-item" id="navbarSupportedContent">
                    <a class="nav-link" href="./Authorization.html">Autorizar Liquidaciones</a>
                </li>
                <li class="nav-item" id="navbarSupportedContent">
                    <a class="nav-link" href="./Empleado.html"> Menu de gestión de empleados</a>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item" id="navbarSupportedContent">
                    <a class="nav-link" href="ChangePassword.html">Cambiar contraseña</a>
                </li>
                <li class="nav-item" id="navbarSupportedContent">
                    <a class="nav-link" id="CerrarSesion">Cerrar Sesión</a>
                </li>
            </ul>
        </div>
    </nav>
</body>
</html>